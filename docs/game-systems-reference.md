# 게임 시스템 레퍼런스 — 머나먼약속

> 클래시 오브 킹즈(COK) 시스템을 분석하여 머나먼약속 설계에 적용할 레퍼런스 문서.
> Phase 1+ 기능 설계 시 이 파일을 기준으로 삼는다.
> MVP(Phase 0) 구현 범위는 `docs/prd.md` 참조.

---

## 1. 유닛 스탯 체계

### 1-1. 스탯 항목 정의

| 스탯 | 설명 | 적용 범위 |
|---|---|---|
| 공격력 (ATK) | 1회 공격 시 가하는 피해량 | 전 유닛 |
| 방어력 (DEF) | 받는 피해 감소량 | 전 유닛 |
| 체력 (HP) | 최대 생명력 | 전 유닛 |
| 사정거리 (RNG) | 공격 가능 최대 타일 수 | 원거리 유닛에서 유의미 |
| 속도 (SPD) | 이동 속도 (타일/초) | 전 유닛 |
| 적재량 (CARGO) | 채집 시 운반 가능 자원량 | 채집 파견 시 적용 |
| 식량소모 (FOOD) | 시간당 소비 식량 | 유지비 계산에 적용 |
| 전투력 (CP) | 종합 강도 지표 (공/방/체 합산 파생값) | 전투 매칭, UI 표시용 |

### 1-2. COK 유닛 스탯 수치 레퍼런스

#### 보병 (Infantry)

| 유닛 | 공격력 | 방어력 | 체력 | 사정거리 | 속도 | 적재량 | 식량소모 |
|---|---|---|---|---|---|---|---|
| 민병 (T1) | 6 | 14 | 8 | 1 | 8 | 8 | 0.21 |
| 창병 (T2) | 22 | 13 | 6 | 1 | 9 | 9 | 0.62 |
| 검사 (T3) | 15 | 35 | 15 | 1 | 8 | 9 | 0.83 |
| 베르세르크 (T5) | 49 | 114 | 42 | 1 | 8 | 12 | 2.08 |
| 바바리안지휘관 (T6) | 55 | 191 | 68 | 1 | 9 | 13 | 4.17 |

#### 기병 (Cavalry)

| 유닛 | 공격력 | 방어력 | 체력 | 사정거리 | 속도 | 적재량 | 식량소모 |
|---|---|---|---|---|---|---|---|
| 기병 (T1) | 11 | 8 | 4 | 1 | 14 | 6 | 0.21 |
| 궁기병 (T3) | 32 | 17 | 7 | 4 | 13 | 7 | 0.83 |
| 신성기사 (T5) | 90 | 65 | 21 | 1 | 14 | 10 | 2.08 |

#### 궁병 (Archer)

| 유닛 | 공격력 | 방어력 | 체력 | 사정거리 | 속도 | 적재량 | 식량소모 |
|---|---|---|---|---|---|---|---|
| 단궁수 (T1) | 8 | 6 | 3 | 5 | 8 | 8 | 0.21 |
| 석궁수 (T2) | 26 | 13 | 4 | 8 | 8 | 8 | 0.62 |
| 명사수 (T5) | 65 | 49 | 15 | 5 | 8 | 12 | 2.08 |

#### 공성병기 / 전차 (Siege)

| 유닛 | 공격력 | 방어력 | 체력 | 사정거리 | 속도 | 적재량 | 식량소모 |
|---|---|---|---|---|---|---|---|
| 투석기 (T1) | 20 | 9 | 5 | 10 | 7 | 13 | 0.21 |
| 충차 (T2) | 9 | 14 | 8 | 1 | 5 | 20 | 0.42 |
| 화포 (T5) | 164 | 73 | 26 | 10 | 7 | 17 | 2.08 |

### 1-3. 머나먼약속 적용 방향

- COK 4종(보병/기병/궁병/공성) → 우리 게임 4종(**보병/전차/공군/특수**) 으로 매핑
- 티어: COK 1~13 → 우리 게임 **티어 1~6** (MVP 범위)
- 사정거리: 근접(1) / 단거리(3~5) / 장거리(8~10) 3단계로 단순화
- 식량소모: Phase 1+ 자원 시스템 도입 시 유지비로 활용
- 전투력(CP): `ATK * 2 + DEF + HP` 파생 공식 (Phase 0 UI 표시용으로 선도입 가능)

---

## 2. 자원 시스템

### 2-1. COK 자원 종류 및 획득

| 자원 | 주 획득 방법 | 잠금 조건 |
|---|---|---|
| 식량 | 농지 생산, 필드 채집, 전투 약탈 | 기본 제공 |
| 목재 | 벌목장 생산, 필드 채집 | 기본 제공 |
| 철 | 철광산 채집 | 캐슬 Lv.10+ |
| 미스릴 | 미스릴 광산 채집 | 캐슬 Lv.15+ |
| 골드 | 과금, 퀘스트, 이벤트 보상 | - |

### 2-2. 머나먼약속 적용 방향

```
Phase 0 (MVP)
  resources: number  ← 단일 재화 (전투 보상으로만 획득)

Phase 1+
  food:     number   ← 유닛 유지비 (식량소모 × 유닛 수)
  wood:     number   ← 건물 건설 재료
  iron:     number   ← 고급 유닛 훈련 재료
  gold:     number   ← 프리미엄 재화 (과금 + 이벤트)
```

---

## 3. 건물 시스템

### 3-1. COK 건물 분류

#### 군사 생산
| 건물 | 생산 유닛 |
|---|---|
| 병영 | 보병 (창병 계열, 검사 계열) |
| 마구간 | 기병 (돌격기병, 궁기병) |
| 궁수훈련소 | 궁병 (장궁병, 석궁병) |
| 전차공방 | 공성병기 (투석기, 충차) |

#### 자원 생산
| 건물 | 생산 자원 | 잠금 조건 |
|---|---|---|
| 농지 | 식량 | - |
| 벌목장 | 목재 | - |
| 철광산 | 철 | 캐슬 Lv.10 |
| 미스릴 광산 | 미스릴 | 캐슬 Lv.15 |

#### 핵심 기반 시설
| 건물 | 역할 |
|---|---|
| 캐슬 | 도시 레벨 기준점, 다른 건물 잠금 해제 |
| 아카데미 | 기술 연구 (전투/경제/발전 3종) |
| 훈련소 | 전투 파견 병력 수 증가 |
| 자원보호고 | 약탈 방어 (일정량 자원 보호) |
| 의무대 | 전투 부상병 치료 |
| 전쟁요새 | 방어 장치 (Lv.3 이상) |
| 전쟁의 홀 | 연맹 집결 공격 규모 증대 |

### 3-2. 머나먼약속 적용 방향

```
Phase 0 (MVP): 건물 시스템 없음 (전투 루프만 검증)

Phase 1+ 수도 화면 도입 시:
  병영     → 보병/특수 유닛 훈련
  기갑창   → 전차 유닛 훈련
  항공기지 → 공군 유닛 훈련
  연구소   → 국가 기술 연구 (발전/경제/전투)
  자원시설 → 식량/목재/철 자동 생산
  의무대   → 전투 손실 유닛 회복
```

---

## 4. 계급 및 관직 시스템

### 4-1. COK 관직 (왕위 쟁탈전 보상)

| 관직 | 주요 버프 |
|---|---|
| 국왕 | 부대 공격 +15%, 방어 +15%, 행군 상한 +10% |
| 여왕 | 자원 생산 +15%, 자원 보호 +20% |
| 수상 | 건설/훈련/연구 속도 +5% |
| 대법관 | 자원 생산 +10%, 훈련 속도 +5% |
| 기사 | 부대 공격 +5%, 행군 속도 +10% |

### 4-2. 머나먼약속 계급 체계

```
명성치 범위에 따른 4단계 계급:
  soldier  (병사)    →  기본 시작 계급
  general  (장군)    →  전투 승리 누적
  marquis  (후작)    →  다수 영토 점령
  duke     (공작)    →  왕국 근접 거점 점령

각 계급 버프 (Phase 1+ 적용):
  general  → 유닛 공격력 +5%
  marquis  → 유닛 공격력 +10%, 자원 획득 +10%
  duke     → 유닛 공/방 +15%, 자원 획득 +20%
```

---

## 5. 기술 연구 시스템

### 5-1. COK 아카데미 연구 카테고리

- **전투**: 유닛 공격력/방어력 %증가, 행군 속도 증가
- **경제**: 자원 채집 효율 증가, 자원 생산량 증가
- **발전**: 건설 속도, 훈련 속도, 연구 속도 증가

### 5-2. 머나먼약속 적용 방향

```
Phase 1+ 국가 기술 연구소:
  [전투 트리]
    - 보병 전투력 +%
    - 전차 관통력 +%
    - 공군 폭격 범위 +%
    - 특수 스킬 쿨타임 감소

  [경제 트리]
    - 자원 획득량 +%
    - 식량 소모 -%
    - 유닛 치료 비용 -%

  [발전 트리]
    - 유닛 훈련 속도 +%
    - 기술 연구 속도 +%
    - 거점 점령 속도 +%
```

---

## 6. 전투 시스템 상세

### 6-1. COK 왕위 쟁탈전 조건

- 참가 최소 조건: 캐슬 Lv.19+, 전투력 50만~100만, 7티어 병력 보유
- 왕성 + 주변 투석기 8시간 연속 점령 유지 = 승리
- 연맹(길드) 단위 참전

### 6-2. 머나먼약속 전투 모드 대응

| COK 모드 | 머나먼약속 대응 |
|---|---|
| 일반 공격 (타 성 점령) | 공격 전투 (5~15분, 거점 점령) |
| 방어 (쉴드 / 자동 방어) | 방어 전투 (10~15분, 거점 수호) |
| 왕위 쟁탈전 | 이벤트 왕국 점령전 (Phase 1+) |
| 연맹 집결 공격 | 연맹 멀티플레이 (Phase 2+) |

---

## 7. 유닛 티어 성장 곡선 참고

COK 티어별 공격력 성장 비율 (보병 기준):

```
T1 민병:     ATK  6  (기준 1.0×)
T2 창병:     ATK 22  (기준 3.7×)
T3 검사:     ATK 15  (3종 분화 시작, 탱커형은 낮음)
T5 베르세르크: ATK 49  (기준 8.2×)
T6 지휘관:   ATK 55  (기준 9.2×)

→ 각 티어 간 약 1.5~2× 성장 곡선 적용 권장
→ 머나먼약속 T1~T6 ATK 설계 예시:
   T1:10 / T2:18 / T3:30 / T4:50 / T5:80 / T6:120
```
